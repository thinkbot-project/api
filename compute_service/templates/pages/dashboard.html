{% extends "layouts/narrow.html" %}

{% block title %}Dashboard &mdash; thinkbot{% endblock %}

{% block narrow_content %}
<h1>Dashboard</h1>
<ul id="dashboard_tabs" class="nav nav-tabs">
  <li class="active"><a href="#api" data-toggle="tab">API Access</a></li>
  <li><a href="#jobs" data-toggle="tab">Job History</a></li>
  <li><a href="#account" data-toggle="tab">Account Details</a></li>
</ul>

<div id="dashboard_tabs" class="tab-content">

  <div class="tab-pane fade in active" id="api">
    <h2>Using thinkbot</h2>
    <p>In general, you interact with thinkbot not through this website, but through a programmatic interface (called an API). thinkbot has <a href="{% url 'docs' %}">some great documentation</a> to help you get going with its API.</p>
    <p>You&#8217;ll need the following authorisation token to authenticate your requests as you use the thinkbot API:</p>
    <p class="lead"><strong>{{ user_token }}</strong></p>
    <p>The documentation will show you how to do this, and a whole lot more. So do <a href="{% url 'docs' %}">go have a look</a>!</p>
    <p>Remember thinkbot&#8217;s API and its documentation are a work in progress. If you have any questions or feedback, please <a href="mailto:support@thinkbot.net">get in touch with me</a>.</p>
    <p>Happy coding!</p>
  </div>

  <div class="tab-pane fade" id="jobs">
    <h2>The status of your jobs</h2>
    <p>The following <a href="{% url 'api_root' %}users/{{ user.id }}">HTML interface</a> to the API gives you a deeper look at your jobs, and often comes handy during debugging.</p>
    <div class="table-responsive">
      <table class="table">
	<thead>
	  <tr>
	    <th>#</th>
	    <th>Name</th>
	    <th>Environment</th>
	    <th>Status</th>
	  </tr>
	</thead>
	<tbody>
	  {% for job in user.jobs.all %}
	  <tr>
	    <td>{{ job.id }}</td>
	    <td><a href="{% url 'api_root' %}jobs/{{ job.id }}">{{ job.name }}</td>
	    <td>{{ job.environment }}</td>
	    <td>{{ job.status }}</td>
	  </tr>
	  {% endfor %}
	</tbody>
      </table>
    </div>
  </div>

  <div class="tab-pane fade" id="account">
    <h2>Edit your profile</h2>
    <p class="text-muted">Coming soon</p>
    <h2>Edit your payment information</h2>
    <p class="text-muted">Coming soon</p>
  </div>

</div>
{% endblock %}
